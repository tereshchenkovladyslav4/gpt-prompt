<mat-sidenav-container>
  <mat-sidenav
    *ngIf="mediaService.isMobile()"
    [opened]="false"
    [mode]="'over'"
    #sidenav
    class="sidenav mat-elevation-z6"
  >
  </mat-sidenav>

  <mat-sidenav-content id="main">
    <div class="app-wrapper">
      <header>
        <mat-toolbar>
          <div class="container d-flex justify-content-between align-items-center">
            <div>
              <a routerLink="/" color="primary" class="no-hover-effect" mat-button disableRipple>
                <img class="logo-wrap" src="assets/icons/logo.svg" />
              </a>
            </div>

            <ng-container *ngIf="authService.isAuthenticated(); else notAuthenticated">
              <mat-menu #userMenu="matMenu">
                <button routerLink="/account" mat-menu-item>Account Information</button>
                <button (click)="logout()" mat-menu-item>Logout</button>
              </mat-menu>
              <button
                *ngIf="!mediaService.isMobile()"
                color="primary"
                class="no-hover-effect"
                mat-button
                disableRipple
                [matMenuTriggerFor]="userMenu"
              >
                <div fxLayout="row" fxLayoutAlign="start center">
                  <div
                    class="avatar me-3"
                    [style.background-image]="
                      user?.profilePicture
                        ? 'url(' + serverUrl + '/' + user?.profilePicture + ')'
                        : 'url(assets/images/user.svg)'
                    "
                  ></div>
                  <small class="">{{ user?.firstName }}</small>
                </div>
              </button>
              <button
                *ngIf="mediaService.isMobile()"
                mat-icon-button
                [ngClass]="{ 'is-active': !menuHidden }"
                (click)="toggleSidenav()"
              >
                <mat-icon>menu</mat-icon>
              </button>
            </ng-container>

            <ng-template #notAuthenticated>
              <ng-container *ngIf="!mediaService.isMobile()">
                <div fxLayout="row" fxLayoutAlign="start center">
                  <button class="mr-1" routerLink="/login" mat-button>Log in</button>
                  <button class="mr-1" routerLink="/signup" color="accent" mat-stroked-button>Sign Up</button>
                  <a routerLink="/sitemanager/how" mat-button>How it works</a>
                </div>
              </ng-container>
              <mat-menu #authMenu="matMenu">
                <a routerLink="/bid" mat-menu-item>Bid</a>
                <a routerLink="/blab" mat-menu-item>Blab</a>
                <button routerLink="/signup" mat-menu-item>Sign Up</button>
                <button routerLink="/login" mat-menu-item>Log in</button>
                <a routerLink="/sitemanager/how" mat-menu-item>How it works</a>
              </mat-menu>
              <button *ngIf="mediaService.isMobile()" mat-icon-button [matMenuTriggerFor]="authMenu">
                <mat-icon>more_vert</mat-icon>
              </button>
            </ng-template>
          </div>
        </mat-toolbar>
      </header>

      <div class="app-content-wrap">
        <div class="container main-page-wrap">
          <router-outlet></router-outlet>
        </div>
      </div>

      <div class="sticky-footer-wrap">
        <footer>
          <mat-toolbar fxLayout="column" fxLayoutAlign="center" color="primary">
            <div fxLayout="column" fxLayout.gt-xs="row wrap" fxLayoutAlign="center center">
              <div class="footer-main" fxLayout="row wrap" fxLayoutAlign="center center">
                <div><a routerLink="/sitemanager/about">About</a></div>
                <div><a routerLink="/sitemanager/how">How it works</a></div>
                <div>
                  <a routerLink="/sitemanager/investor" [ngClass]="{ 'border-none': mediaService.isMobile() }"
                    >Investor Relations</a
                  >
                </div>
              </div>
              <div class="footer-main" fxLayout="row wrap" fxLayoutAlign="center center">
                <div><a routerLink="/sitemanager/terms">Terms of Service</a></div>
                <div><a routerLink="/sitemanager/privacy">Privacy Policy</a></div>
                <div><a routerLink="/sitemanager/cookie" class="border-none">Cookie Policy</a></div>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="center center" class="copyright-wrap">
              <small class="copyrights">&copy; Dev Pony 2023-2023</small>
            </div>
          </mat-toolbar>
        </footer>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
